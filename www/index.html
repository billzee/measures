<!DOCTYPE HTML>
<html ng-app="Main">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <script type="text/javascript" src="components/loader.js"></script>
	<script type="text/javascript" src="bower_components/angular/angular.min.js"></script>
	<script src="app.js"></script>
   <!--  <link rel="stylesheet" href="css/topcoat/css/topcoat-mobile-light.min.css"> -->
    <link rel="stylesheet" href="css/style.css">


    <script type="text/javascript">
    
    document.addEventListener ("deviceready", onDeviceReady, false);

    //This function is executed when PhoneGap loading completed.
    function onDeviceReady () {
        window.alert ('Loading PhoneGap is completed、Camera is now ready to be used.');
    }
    </script>
  </head>
  <body ng-controller="mainController as mainCtrl">
    <div id="dropzone" onclick="snapPicture()">
      <div ng-show="mainCtrl.img.src == ''">Câmera</div>
      <img id="picture" ng-src="{{mainCtrl.img.src}}" width="800" height="600">
    </div>

    
  </body>

  <script>
    var img = new Image();
    /*canvas.addEventListener("touchstart", handleStart, false);
    canvas.addEventListener("touchend", handleEnd, false);
    canvas.addEventListener("touchmove", handleMove, false);*/

    function handleStart(event){
    console.log("start");
    event.preventDefault(); 
    start.x = event.targetTouches[0].pageX;
    start.y = event.targetTouches[0].pageY;
    }

    function handleMove(event){
    console.log("move");
    event.preventDefault(); 
    console.log(event);
    move.x = event.changedTouches[0].pageX;
    move.y = event.changedTouches[0].pageY;
    var line = new Line(start.x,start.y,move.x,move.y);
    line.drawWithArrowheads(ctx)  
    }

    function handleEnd(event){
    event.preventDefault(); 

    end.x = event.changedTouches[0].pageX;
    end.y = event.changedTouches[0].pageY;
    line.drawWithArrowheads(ctx);
    }
  </script>
  </body>   
</html>